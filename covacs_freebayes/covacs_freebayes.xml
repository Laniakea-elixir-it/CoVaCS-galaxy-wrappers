 <tool id="covacs_frebayes" name="covacs_freebayes" version="1.2.0">
  <description>freebayes wrapper for covacs</description>
  <macros>
  <import>covacs_macros.xml</import>
  <import>bed_macros.xml</import>
  </macros>
  <requirements>
	<requirement type="package" version="1.2.0" >freebayes</requirement>
  </requirements>
  <command>
    <![CDATA[

	
	
	
	freebayes
	
	   ##call chose genome from mutect2_indexes.loc and from history 
        #if $reference_source.reference_source_selector == "cached"
                -f $reference_source.ref_file.fields.path
        #end if
        #if $reference_source.reference_source_selector == "history"
		-f $reference_source.ref_file_h
	#end if
	
	#if $input2
	-C $input2
	#end if
	
	#if $bed_source.bed_source_selector == "history"
        -t  $bed_source.bed_history 
        #end if
        #if $bed_source.bed_source_selector == "cached"
        -t $bed_source.bed_cached.fields.path
        #end if

	$input1
	> $output
	

	 #if str($filter) == 'yes':
         perl  $__tool_directory__/filter.fb.pl $output $output_filtered
        #end if


	]]>
  </command>
  <inputs>
    <expand macro="reference_loc"/>
    <param format="bam" name="input1" label="bam file" type="data" optional="true" />
    <expand macro="bed_loc"/>
    <param name="input2" label="-C min-alternate-count" type="text" optional="true"/>
    <param name="filter" type="select" label="filter variants with filter.varscan.pl?">
            <option value="no" >no</option>
            <option value="yes" selected="true" >yes</option>
    </param>
  </inputs>
  <outputs>
    <data format="vcf" name="output" label="${tool.name} on ${on_string}:vcf"/>
  </outputs>
  <help>
  </help>
  <citations>
  </citations>
</tool>

